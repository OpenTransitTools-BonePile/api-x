<script src="tv4.js"></script>

<script type="application/javascript">
var agencies = null;
fetch("../../agencies.json")
    .then(response => response.json())
    .then(json => (agencies = json));


//
// https://stackoverflow.com/questions/25145160/json-schema-ref-does-not-work-for-relative-path
//
var stops = null;
fetch("../../stops.json")
    .then(response => response.json())
    .then(json => (stops = json));


var stps = null;
fetch("../../f.json")
    .then(response => response.json())
    .then(json => (stps = json));


function testStops()
{
    var data1 = {'residential_address':{'namex':{}}};
    var data2 = {};
    var schema = stps;
    console.log(schema);
    console.log(tv4.validateResult(data1, schema, true, true));
    console.log(tv4.validateMultiple(data1, schema, true, true));

    alert("data 1: " + tv4.validate(data1, schema, true, true)); // true
    alert("data 2: " + tv4.validate(data2, schema, true, true)); // false
}

function testAgencies()
{
    tv4.addSchema('xxx', agencies);
    //var data1 = {'name':'poo'};
    var data1 = {'name':'poo', 'agency':{'name':'TM'}};
    var data2 = {'name':'poo', 'agency':{'namex':'TM'}};
    var schema = stops;
    console.log(schema);
    console.log(tv4.validateResult(data1, schema, true, true));
    console.log(tv4.validateMultiple(data1, schema, true, true));

    alert("data 1: " + tv4.validate(data1, schema, true, true)); // true
    alert("data 2: " + tv4.validate(data2, schema, true, true)); // false
}
</script>


<a href="#" onclick="testAgencies()">Test Agencies Schema</a>
<br/>
<a href="#" onclick="testStops()">Test Stops Schema</a>
